<p align="center">
  <img src="https://github.com/XinJingHao/Images/blob/main/OkayPlan/OkayPlan-logo.png" width="300" /><br>
  <img src="https://img.shields.io/badge/Python-blue" />
  <img src="https://img.shields.io/badge/PathPlanning-blueviolet" />
  <img src="https://img.shields.io/badge/Pytorch-ff69b4" />
</p>

<br/>

<p align="center">
  <strong>OkayPlan: A Real-time Path Planning Algorithm for</strong><br>
  <strong>Dynamic Environments</strong>
</p>


<br/>

## Gallery
<p align="center">
  <img src="https://github.com/XinJingHao/Images/blob/main/OkayPlan/4.gif" width="250" />
  <img src="https://github.com/XinJingHao/Images/blob/main/OkayPlan/6.gif" width="250" />
  <img src="https://github.com/XinJingHao/Images/blob/main/OkayPlan/10.gif" width="250" />
</p>



## Dependencies:

```bash
torch >= 2.4.1
pygame >= 2.6.1
numpy >= 2.1.1

python >= 3.11.5
```
You can install **torch** by following the guidance from its [official website](https://pytorch.org/get-started/locally/). We strongly suggest you install the **CUDA 12.1** version, though CPU version or lower CUDA version are also supported.

<br>

## How to use:
After installation, you can run OkayPlan via:
```bash
python Application_Phase.py
```
Then you will see:
<div align="center">
<img width="25%" height="auto" src="https://github.com/XinJingHao/Images/blob/main/OkayPlan/navigation.gif">
</div>
where the red point is our robot, the green point is the target, and the blue curve is the path generated by OkayPlan.

### Play with Keyboard:
You can also play with OkayPlan using your **Keyboard** (UP/DOWN/LEFT/RIGHT) :
```bash
python Application_Phase.py --Playmode True --FPS 30
```

### Basic parameters:

There are 6 parameters that could be configured when running OkayPlan:

- **dvc (string; default `'dvc'`)**:
  
  - The device that runs the OkayPlan
    
  - Should be one of `'cpu'`/`'cuda'`. We suggest using `'cuda'` (GPU) to accelerate the simulation
 
- **RO (bool; default `'True'`)**:
  
  - True = random obstacles; False = consistent obstacles

- **DPI (bool; default `'True'`)**:
  
  - True = Dynamic Prioritized Initialization; False = Prioritized Initialization

- **KP (bool; default `'True'`)**:
  
  - True = Use Kinematics Penalty; False = Not use Kinematics Penalty

- **FPS (int; default `'0'`)**:
  
  - The FPS when rendering
  - **'0'** means render at the maximum speed
 
- **Playmode (bool; default `'False'`)**:
  
  - True = Control the target point with your keyboard (UP/DOWN/LEFT/RIGHT); False = Target point moves by itself



<br>

## Comparison with other methods (real-time rendering):
<div align="center">
<img width="75%" height="auto" src="https://github.com/XinJingHao/Images/blob/main/OkayPlan/All_gpp.gif">
</div>

<br>

## Decoupled Implementation:
The decoupled implementation of OkayPlan can be found in folder _'Decoupled Implementation'_, where the ```L_SEPSO.py``` is decoupled into ```Planner.py```, ```Env.py```, and ```mian.py```.

## ROS Implementation:
<p align="left">
  <img src="https://github.com/XinJingHao/Images/blob/main/ColorDynamic/warehouse.gif" width="500" />
</p>

Please refer to the [OPCD](https://github.com/XinJingHao/OPCD-Navigation) Navigation System.

## Citing this Project:

To cite this repository in publications:

```bibtex
@article{XinOkayPlan,
title = {OkayPlan: Obstacle Kinematics Augmented Dynamic real-time path Planning via particle swarm optimization},
journal = {Ocean Engineering},
volume = {303},
pages = {117841},
year = {2024},
issn = {0029-8018},
doi = {https://doi.org/10.1016/j.oceaneng.2024.117841},
url = {https://www.sciencedirect.com/science/article/pii/S002980182401179X},
author = {Jinghao Xin and Jinwoo Kim and Shengjia Chu and Ning Li},
}
```
